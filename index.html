<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Glowered Store - A melhor loja para roupas e acess√≥rios incr√≠veis. Encontre camisas, moletons, cal√ßas e acess√≥rios premium.">
    <meta name="keywords" content="roupas, acess√≥rios, moda, loja online, glowered">
    <meta name="author" content="Glowered Store">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="shortcut icon" href="https://i.ibb.co/Kcjh5G8b/logo-No-Background.png" type="image/x-icon">
    <script src="./js/auth.js" defer></script>
    <script src="./js/produtos.js" defer></script>
    <script src="./js/carrinho.js" defer></script>
    <title>Glowered Store - Roupas e Acess√≥rios Premium</title>
</head>

<body>
    <header>
        <nav aria-label="Navega√ß√£o principal">
            <div class="nav-container">
                <!-- Logo e T√≠tulo √† esquerda -->
                <div id="imgTitle" role="banner">
                    <img src="https://i.ibb.co/Kcjh5G8b/logo-No-Background.png" alt="Glowered Store Logo" width="50"
                        height="50">
                    <h1><span class="brand-green">Glowered</span> <span class="brand-purple">Store</span></h1>
                </div>

                <!-- Barra de pesquisa no centro -->
                <div class="search-container" role="search">
                    <form id="search-form">
                        <label for="search-input" class="sr-only">Pesquisar produtos</label>
                        <input id="search-input" type="search" name="query" placeholder="Pesquisar produtos..."
                            aria-label="Pesquisar na loja">
                        <button type="submit" aria-label="Executar pesquisa">
                            <img src="https://img.icons8.com/search " alt="" class="searchImg">
                        </button>
                    </form>
                </div>

                <!-- A√ß√µes do usu√°rio √† direita -->
                <div class="header-actions">
                    <button id="cart-btn" aria-label="Carrinho de compras" aria-expanded="false">
                        <span id="cart-count" aria-live="polite">0</span>
                        <a href="./html/carrinho.html">
                            <img src="https://img.icons8.com/fluency/96/000000/shopping-cart.png" alt="Carrinho">
                        </a>
                    </button>

                    <button id="accountButton" aria-label="Minha conta">
                        <!-- Script vai atualizar dinamicamente baseado no tipo de usu√°rio -->
                        <a href="./html/profile.html" id="account-link">
                            <img src="https://i.ibb.co/qLHtNJTN/account-Icon.png" alt="Conta">
                        </a>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section class="hero" aria-labelledby="hero-title">
            <div class="hero-content">
                <h2 id="hero-title">Bem-vindo √† Glowered Store</h2>
                <p class="hero-subtitle">A melhor loja para roupas e acess√≥rios incr√≠veis.</p>

                <div class="hero-actions">
                    <a href="#featured-products" class="btn btn-primary" onclick="filtrarProdutos('all')">Ver
                        Cole√ß√£o</a>
                    <a href="#offers" class="btn btn-secondary" onclick="filtrarProdutos('promocoes')">Ofertas
                        Especiais</a>
                </div>
            </div>

            <nav class="category-nav" aria-label="Categorias de produtos">
                <h3 class="sr-only">Navegar por categorias</h3>
                <div class="category-grid">
                    <a href="#" class="category-card" aria-label="Camisas" onclick="filtrarPorTipo('camisa')">
                        <img src="https://i.ibb.co/8nNKrMdZ/camisa.png" alt="Camisas">
                        <span>Camisas</span>
                    </a>
                    <a href="#" class="category-card" aria-label="Moletons" onclick="filtrarPorTipo('moletom')">
                        <img src="https://i.ibb.co/99CJr1qX/moletom.png" alt="Moletons">
                        <span>Moletons</span>
                    </a>
                    <a href="#" class="category-card" aria-label="Cal√ßas" onclick="filtrarPorTipo('calca')">
                        <img src="https://i.ibb.co/0yYNCH87/calca.png" alt="Cal√ßas">
                        <span>Cal√ßas</span>
                    </a>
                    <a href="#" class="category-card" aria-label="Acess√≥rios" onclick="filtrarPorTipo('acessorio')">
                        <img src="https://i.ibb.co/4R17Pbgm/acessorios.png" alt="Acess√≥rios">
                        <span>Acess√≥rios</span>
                    </a>
                </div>
            </nav>
        </section>

        <!-- Loading State -->
        <div id="loading" style="text-align: center; padding: 2rem; display: none;">
            <p style="color: var(--accent3); font-family: 'Share Tech Mono', monospace;">
                üåÄ CARREGANDO PRODUTOS...
            </p>
        </div>

        <!-- Error State -->
        <div id="error" style="display: none; text-align: center; padding: 2rem;">
            <p style="color: var(--accent1); font-family: 'Share Tech Mono', monospace;">
                ‚ùå ERRO AO CARREGAR PRODUTOS
            </p>
            <button class="btn btn-primary" onclick="carregarProdutos()">TENTAR NOVAMENTE</button>
        </div>

        <section id="featured-products" class="products-section" aria-labelledby="featured-title">
            <h2 id="featured-title" class="section-title">Produtos em Destaque</h2>
            <div class="products-grid" id="products-grid">
                <!-- Produtos ser√£o carregados via API -->
                <div class="product-card">
                    <div class="product-image">üîÑ Carregando...</div>
                    <h3 class="product-name">Produto Exemplo</h3>
                    <p class="product-description">Carregando descri√ß√£o do produto...</p>
                    <div class="product-price">R$ 0,00</div>
                    <div class="product-actions">
                        <button class="btn-add-cart" disabled>Carregando...</button>
                        <button class="btn-favorite">‚ô•</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="offers" class="products-section" aria-labelledby="offers-title">
            <h2 id="offers-title" class="section-title">Ofertas Especiais</h2>
            <div class="products-grid" id="promo-grid">
                <!-- Produtos em promo√ß√£o ser√£o carregados via API -->
                <div class="product-card featured">
                    <div class="product-badge">- %</div>
                    <div class="product-image">üéÅ Ofertas</div>
                    <h3 class="product-name">Carregando ofertas...</h3>
                    <p class="product-description">Aguarde enquanto carregamos as melhores promo√ß√µes!</p>
                    <div class="product-price">
                        <span class="old-price">R$ 0,00</span>
                        <span class="new-price">R$ 0,00</span>
                    </div>
                    <div class="product-actions">
                        <button class="btn-add-cart" disabled>Carregando...</button>
                        <button class="btn-favorite">‚ô•</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Glowered Store</h3>
                <p>Sua loja de roupas e acess√≥rios premium.</p>
            </div>

            <div class="footer-section">
                <h4>Links R√°pidos</h4>
                <nav aria-label="Links do rodap√©">
                    <ul>
                        <li><a href="/sobre">Sobre N√≥s</a></li>
                        <li><a href="/contato">Contato</a></li>
                        <li><a href="/trocas">Trocas e Devolu√ß√µes</a></li>
                    </ul>
                </nav>
            </div>

            <div class="footer-section">
                <h4>Redes Sociais</h4>
                <div class="social-links">
                    <a href="#" aria-label="Instagram"><img src="./img/instagram.png" alt="Instagram"></a>
                    <a href="#" aria-label="Facebook"><img src="./img/facebook.png" alt="Facebook"></a>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2024 Glowered Store. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üìÑ Index.html carregado');
        
        // Verificar se usu√°rio est√° logado
        const usuario = verificarLogin();

        if (usuario) {
            console.log('‚úÖ Usu√°rio logado:', usuario);
            
            // üî• ADICIONAR: Verificar se √© admin e mostrar link do dashboard
            if (usuario.tipo === 'admin') {
                console.log('üëë Usu√°rio √© administrador - mostrando link do dashboard');
                adicionarLinkAdmin();
            }
            
            // Carregar produtos normalmente (tanto admin quanto cliente)
            console.log('üîÑ Carregando produtos...');
            carregarProdutos();
            
        } else {
            // Usu√°rio n√£o logado
            console.log('‚ùå Usu√°rio n√£o logado');
            
            // Mostrar mensagem para fazer login
            const loadingElement = document.getElementById('loading');
            if (loadingElement) {
                loadingElement.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <p style="color: var(--accent3); margin-bottom: 1rem;">
                            üîê Fa√ßa login para ver os produtos
                        </p>
                        <a href="./html/login.html" class="btn btn-primary">
                            üöÄ Fazer Login
                        </a>
                    </div>
                `;
                loadingElement.style.display = 'block';
            }
        }

        // Configurar busca
        const searchForm = document.getElementById('search-form');
        if (searchForm) {
            searchForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const termo = document.getElementById('search-input').value;
                if (termo) {
                    buscarProdutos(termo);
                }
            });
        }
    });

    // üî• NOVA FUN√á√ÉO: Adicionar link do dashboard admin na navega√ß√£o
    function adicionarLinkAdmin() {
        const headerActions = document.querySelector('.header-actions');
        
        if (headerActions) {
            // Criar bot√£o do dashboard admin
            const adminButton = document.createElement('button');
            adminButton.id = 'admin-dashboard-btn';
            adminButton.setAttribute('aria-label', 'Painel Administrativo');
            adminButton.innerHTML = `
                <a href="./html/admin/admin-dashboard.html" style="display: flex; align-items: center; gap: 0.5rem; text-decoration: none; color: inherit;">
                    <img src="https://img.icons8.com/fluency/96/admin-settings-male.png" alt="Admin" style="width: 24px; height: 24px; filter: invert(1);">
                    <span style="color: var(--accent1); font-family: 'Share Tech Mono', monospace; font-size: 0.8rem;">
                        ADMIN
                    </span>
                </a>
            `;
            
            // Adicionar estilos ao bot√£o
            adminButton.style.background = 'none';
            adminButton.style.border = '2px solid var(--accent1)';
            adminButton.style.padding = '0.5rem';
            adminButton.style.borderRadius = 'var(--radius)';
            adminButton.style.cursor = 'pointer';
            adminButton.style.transition = 'all 0.3s ease';
            
            // Efeito hover
            adminButton.addEventListener('mouseenter', function() {
                this.style.background = 'var(--accent1)';
                this.style.transform = 'translateY(-2px)';
            });
            
            adminButton.addEventListener('mouseleave', function() {
                this.style.background = 'none';
                this.style.transform = 'translateY(0)';
            });
            
            // Inserir antes do bot√£o da conta
            const accountButton = document.getElementById('accountButton');
            if (accountButton) {
                headerActions.insertBefore(adminButton, accountButton);
            } else {
                headerActions.appendChild(adminButton);
            }
            
            console.log('‚úÖ Link do dashboard admin adicionado');
        }
    }

    // üî• OPIONAL: Atualizar o bot√£o de conta para mostrar que √© admin
    function atualizarBadgeAdmin() {
        const usuario = verificarLogin();
        if (usuario && usuario.tipo === 'admin') {
            const accountLink = document.querySelector('#accountButton a');
            if (accountLink) {
                accountLink.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <img src="https://i.ibb.co/qLHtNJTN/account-Icon.png" alt="Conta Admin">
                        <span style="color: var(--accent1); font-size: 0.7rem; background: rgba(255, 45, 149, 0.2); padding: 0.2rem 0.5rem; border-radius: 10px; border: 1px solid var(--accent1);">
                            ADMIN
                        </span>
                    </div>
                `;
            }
        }
    }

    // Executar ap√≥s o DOM carregar
    setTimeout(() => {
        const usuario = verificarLogin();
        if (usuario && usuario.tipo === 'admin') {
            atualizarBadgeAdmin();
        }
    }, 100);
</script>
</body>

</html>
<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Glowered Store - A melhor loja para roupas e acess√≥rios incr√≠veis. Encontre camisas, moletons, cal√ßas e acess√≥rios premium.">
    <meta name="keywords" content="roupas, acess√≥rios, moda, loja online, glowered">
    <meta name="author" content="Glowered Store">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="shortcut icon" href="https://i.ibb.co/Kcjh5G8b/logo-No-Background.png" type="image/x-icon">
    <script src="./js/auth.js" defer></script>
    <script src="./js/config.js" defer></script>
    <script src="./js/produtos.js" defer></script>
    <script src="./js/carrinho.js" defer></script>
    <title>Glowered Store - Roupas e Acess√≥rios Premium</title>
</head>

<body>
    <header>
        <nav aria-label="Navega√ß√£o principal">
            <div class="nav-container">
                <!-- Logo e T√≠tulo √† esquerda -->
                <div id="imgTitle" role="banner">
                    <img src="https://i.ibb.co/Kcjh5G8b/logo-No-Background.png" alt="Glowered Store Logo" width="50"
                        height="50">
                    <h1><span class="brand-green">Glowered</span> <span class="brand-purple">Store</span></h1>
                </div>

                <!-- Barra de pesquisa no centro -->
                <div class="search-container" role="search">
                    <form id="search-form">
                        <label for="search-input" class="sr-only">Pesquisar produtos</label>
                        <input id="search-input" type="search" name="query" placeholder="Pesquisar produtos..."
                            aria-label="Pesquisar na loja">
                        <button type="submit" aria-label="Executar pesquisa">
                            <img src="https://img.icons8.com/search" alt="Pesquisar" class="searchImg">
                        </button>
                    </form>
                </div>

                <!-- A√ß√µes do usu√°rio √† direita -->
                <div class="header-actions">
                    <button id="cart-btn" aria-label="Carrinho de compras" aria-expanded="false">
                        <span id="cart-count" aria-live="polite" style="display: none;">0</span>
                        <a href="./html/carrinho.html">
                            <img src="https://img.icons8.com/fluency/96/000000/shopping-cart.png" alt="Carrinho">
                        </a>
                    </button>

                    <button id="admin-dashboard-btn" style="display: none;" aria-label="Painel Administrativo">
                        <!-- Ser√° preenchido via JavaScript -->
                    </button>

                    <button id="accountButton" aria-label="Minha conta">
                        <a href="./html/profile.html" id="account-link">
                            <img src="https://i.ibb.co/qLHtNJTN/account-Icon.png" alt="Conta">
                        </a>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section class="hero" aria-labelledby="hero-title">
            <div class="hero-content">
                <h2 id="hero-title">Bem-vindo √† Glowered Store</h2>
                <p class="hero-subtitle">A melhor loja para roupas e acess√≥rios incr√≠veis.</p>

                <div class="hero-actions">
                    <a href="#featured-products" class="btn btn-primary" onclick="filtrarProdutos('all')">Ver
                        Cole√ß√£o</a>
                    <a href="#offers" class="btn btn-secondary" onclick="filtrarProdutos('promocoes')">Ofertas
                        Especiais</a>
                </div>
            </div>

            <nav class="category-nav" aria-label="Categorias de produtos">
                <h3 class="sr-only">Navegar por categorias</h3>
                <div class="category-grid">
                    <a href="#" class="category-card" aria-label="Camisas" onclick="filtrarPorTipo('camisa')">
                        <img src="https://i.ibb.co/8nNKrMdZ/camisa.png" alt="Camisas">
                        <span>Camisas</span>
                    </a>
                    <a href="#" class="category-card" aria-label="Moletons" onclick="filtrarPorTipo('moletom')">
                        <img src="https://i.ibb.co/99CJr1qX/moletom.png" alt="Moletons">
                        <span>Moletons</span>
                    </a>
                    <a href="#" class="category-card" aria-label="Cal√ßas" onclick="filtrarPorTipo('calca')">
                        <img src="https://i.ibb.co/0yYNCH87/calca.png" alt="Cal√ßas">
                        <span>Cal√ßas</span>
                    </a>
                    <a href="#" class="category-card" aria-label="Acess√≥rios" onclick="filtrarPorTipo('acessorio')">
                        <img src="https://i.ibb.co/4R17Pbgm/acessorios.png" alt="Acess√≥rios">
                        <span>Acess√≥rios</span>
                    </a>
                </div>
            </nav>
        </section>

        <!-- Loading State -->
        <div id="loading" style="text-align: center; padding: 2rem; display: none;">
            <p style="color: var(--accent3); font-family: 'Share Tech Mono', monospace;">
                üåÄ CARREGANDO PRODUTOS...
            </p>
        </div>

        <!-- Error State -->
        <div id="error" style="display: none; text-align: center; padding: 2rem;">
            <!-- Ser√° preenchido via JavaScript -->
        </div>

        <section id="featured-products" class="products-section" aria-labelledby="featured-title">
            <h2 id="featured-title" class="section-title">Produtos em Destaque</h2>
            <div class="products-grid" id="products-grid">
                <!-- Produtos ser√£o carregados via JavaScript -->
            </div>
        </section>

        <section id="offers" class="products-section" aria-labelledby="offers-title">
            <h2 id="offers-title" class="section-title">Ofertas Especiais</h2>
            <div class="products-grid" id="promo-grid">
                <!-- Produtos em promo√ß√£o ser√£o carregados via JavaScript -->
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Glowered Store</h3>
                <p>Sua loja de roupas e acess√≥rios premium.</p>
            </div>

            <div class="footer-section">
                <h4>Links R√°pidos</h4>
                <nav aria-label="Links do rodap√©">
                    <ul>
                        <li><a href="/sobre">Sobre N√≥s</a></li>
                        <li><a href="/contato">Contato</a></li>
                        <li><a href="/trocas">Trocas e Devolu√ß√µes</a></li>
                    </ul>
                </nav>
            </div>

            <div class="footer-section">
                <h4>Redes Sociais</h4>
                <div class="social-links">
                    <a href="#" aria-label="Instagram">
                        <img src="https://i.ibb.co/nsydt90h/image.png" alt="Instagram" onerror="this.style.display='none'">
                    </a>
                    <a href="#" aria-label="Facebook">
                        <img src="https://i.ibb.co/MQryb4c/image.png" alt="Facebook" onerror="this.style.display='none'">
                    </a>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2024 Glowered Store. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
    // Inicializa√ß√£o da aplica√ß√£o
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üöÄ Inicializando Glowered Store...');
        inicializarApp();
    });

    async function inicializarApp() {
        try {
            // Verificar elementos cr√≠ticos
            const elementos = {
                productsGrid: document.getElementById('products-grid'),
                promoGrid: document.getElementById('promo-grid'),
                loading: document.getElementById('loading'),
                error: document.getElementById('error'),
                cartCount: document.getElementById('cart-count')
            };

            console.log('üîç Elementos DOM:', elementos);

            // Verificar autentica√ß√£o
            const usuario = verificarLogin();
            
            if (usuario) {
                console.log('‚úÖ Usu√°rio autenticado:', usuario.nome);
                
                // Configurar interface baseada no tipo de usu√°rio
                if (usuario.tipo === 'admin') {
                    adicionarLinkAdmin();
                    atualizarBadgeAdmin();
                }
                
                // Carregar produtos
                await carregarProdutos();
                
                // Configurar busca
                const searchForm = document.getElementById('search-form');
                if (searchForm) {
                    searchForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        const termo = document.getElementById('search-input').value.trim();
                        if (termo) {
                            buscarProdutos(termo);
                        }
                    });
                }
                
            } else {
                console.log('üîê Usu√°rio n√£o autenticado');
                mostrarLoginRequerido();
            }

        } catch (error) {
            console.error('‚ùå Erro na inicializa√ß√£o:', error);
            mostrarErroCritico(error);
        }
    }

    function adicionarLinkAdmin() {
        const headerActions = document.querySelector('.header-actions');
        const adminBtn = document.getElementById('admin-dashboard-btn');
        
        if (headerActions && adminBtn) {
            adminBtn.innerHTML = `
                <a href="./html/admin/admin-dashboard.html" style="display: flex; align-items: center; gap: 0.5rem; text-decoration: none; color: inherit;">
                    <img src="https://img.icons8.com/fluency/96/admin-settings-male.png" alt="Admin" style="width: 24px; height: 24px; filter: invert(1);">
                    <span style="color: var(--accent1); font-family: 'Share Tech Mono', monospace; font-size: 0.8rem;">
                        ADMIN
                    </span>
                </a>
            `;
            
            // Estilos do bot√£o admin
            adminBtn.style.background = 'none';
            adminBtn.style.border = '2px solid var(--accent1)';
            adminBtn.style.padding = '0.5rem';
            adminBtn.style.borderRadius = 'var(--radius)';
            adminBtn.style.cursor = 'pointer';
            adminBtn.style.transition = 'all 0.3s ease';
            adminBtn.style.display = 'flex';
            adminBtn.style.alignItems = 'center';
            
            // Efeitos hover
            adminBtn.addEventListener('mouseenter', function() {
                this.style.background = 'var(--accent1)';
                this.style.transform = 'translateY(-2px)';
            });
            
            adminBtn.addEventListener('mouseleave', function() {
                this.style.background = 'none';
                this.style.transform = 'translateY(0)';
            });
            
            console.log('‚úÖ Painel admin adicionado');
        }
    }

    function atualizarBadgeAdmin() {
        const accountLink = document.querySelector('#accountButton a');
        if (accountLink) {
            accountLink.innerHTML = `
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <img src="https://i.ibb.co/qLHtNJTN/account-Icon.png" alt="Conta Admin">
                    <span style="color: var(--accent1); font-size: 0.7rem; background: rgba(255, 45, 149, 0.2); padding: 0.2rem 0.5rem; border-radius: 10px; border: 1px solid var(--accent1);">
                        ADMIN
                    </span>
                </div>
            `;
        }
    }

    function mostrarLoginRequerido() {
        const productsGrid = document.getElementById('products-grid');
        if (productsGrid) {
            productsGrid.innerHTML = `
                <div style="grid-column: 1/-1; text-align: center; padding: 3rem;">
                    <h3 style="color: var(--accent3); margin-bottom: 1rem;">üîê Acesso Restrito</h3>
                    <p style="color: var(--muted); margin-bottom: 2rem;">
                        Fa√ßa login para explorar nossa cole√ß√£o exclusiva
                    </p>
                    <a href="./html/login.html" class="btn btn-primary" style="font-size: 1.1rem;">
                        üöÄ Fazer Login
                    </a>
                    <a href="./html/cadastro.html" class="btn btn-secondary" style="font-size: 1.1rem; margin-left: 1rem;">
                        üìù Criar Conta
                    </a>
                </div>
            `;
        }
        
        // Esconder se√ß√µes vazias
        const promoGrid = document.getElementById('promo-grid');
        if (promoGrid) promoGrid.innerHTML = '';
    }

    function mostrarErroCritico(error) {
        const errorDiv = document.getElementById('error');
        if (errorDiv) {
            errorDiv.innerHTML = `
                <div style="text-align: center; padding: 2rem;">
                    <h3 style="color: var(--accent1); margin-bottom: 1rem;">üö® Erro Cr√≠tico</h3>
                    <p style="color: var(--muted); margin-bottom: 1rem;">
                        Ocorreu um erro inesperado na aplica√ß√£o:
                    </p>
                    <code style="background: var(--bg-2); padding: 1rem; border-radius: var(--radius); display: block; margin: 1rem 0; font-family: 'Share Tech Mono', monospace;">
                        ${error.message}
                    </code>
                    <button class="btn btn-primary" onclick="location.reload()">
                        üîÑ Recarregar P√°gina
                    </button>
                </div>
            `;
            errorDiv.style.display = 'block';
        }
    }

    // Fun√ß√µes de filtro (ser√£o implementadas em produtos.js)
    function filtrarProdutos(tipo) {
        console.log('üîç Filtrando produtos:', tipo);
        // Implementa√ß√£o em produtos.js
    }

    function filtrarPorTipo(tipo) {
        console.log('üè∑Ô∏è Filtrando por tipo:', tipo);
        // Implementa√ß√£o em produtos.js
    }

    function buscarProdutos(termo) {
        console.log('üîé Buscando:', termo);
        // Implementa√ß√£o em produtos.js
    }
    </script>
</body>

</html>